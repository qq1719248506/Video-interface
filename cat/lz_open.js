import{Crypto,load,_,jinja2}from"assets://js/lib/cat.js";let key="lz",HOST="https://cj.lziapi.com",siteKey="",siteType=0;const UA="Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1";async function request(reqUrl,agentSp){return(await req(reqUrl,{method:"get",headers:{"User-Agent":agentSp||UA,Referer:HOST}})).content}async function init(cfg){siteKey=cfg.skey,siteType=cfg.stype}async function home(filter){return JSON.stringify({class:[{type_id:1,type_name:"电影"},{type_id:2,type_name:"追剧"},{type_id:3,type_name:"综艺"},{type_id:4,type_name:"动漫"},{type_id:36,type_name:"体育"}],filters:{2:[{key:"cateId",name:"类型",value:[{n:"全部",v:"2"},{n:"短剧",v:"46"},{n:"陆剧",v:"13"},{n:"韩剧",v:"15"},{n:"欧美剧",v:"16"},{n:"港剧",v:"14"},{n:"台剧",v:"21"},{n:"日剧",v:"22"},{n:"海外剧",v:"23"},{n:"泰剧",v:"24"},{n:"纪录片",v:"20"}]}],1:[{key:"cateId",name:"类型",value:[{n:"全部",v:"1"},{n:"动作片",v:"6"},{n:"喜剧片",v:"7"},{n:"爱情片",v:"8"},{n:"科幻片",v:"9"},{n:"恐怖片",v:"10"},{n:"剧情片",v:"11"},{n:"战争片",v:"12"},{n:"电影解说",v:"35"}]}],3:[{key:"cateId",name:"类型",value:[{n:"全部",v:"3"},{n:"国综",v:"25"},{n:"港综",v:"26"},{n:"韩日综",v:"27"},{n:"欧美综",v:"28"}]}],4:[{key:"cateId",name:"类型",value:[{n:"全部",v:"4"},{n:"国漫",v:"29"},{n:"日韩动漫",v:"30"},{n:"欧美动漫",v:"31"},{n:"港漫",v:"32"},{n:"海外动漫",v:"33"}]}],36:[{key:"cateId",name:"类型",value:[{n:"全部",v:"36"},{n:"足球",v:"37"},{n:"篮球",v:"38"},{n:"网球",v:"39"},{n:"斯诺克",v:"40"}]}]}})}async function homeVod(){}async function category(tid,pg,filter,extend){pg<=0&&(pg=1);var extend=JSON.parse(await request(HOST+"/index.php/ajax/data?mid=1&tid="+(extend.cateId||tid)+"&page="+pg+"&limit=20")),videos=[];for(const vod of extend.list)videos.push({vod_id:vod.vod_id,vod_name:vod.vod_name,vod_pic:vod.vod_pic,vod_remarks:""});return JSON.stringify({page:parseInt(extend.page),pagecount:extend.pagecount,limit:20,total:extend.total,list:videos})}async function detail(id){var html=await request(HOST+"/index.php/vod/detail/id/"+id+".html"),html=load(html),id={vod_id:id,vod_name:html("h1:first").text().trim(),vod_type:html(".stui-content__detail p:first a").text(),vod_actor:html(".stui-content__detail p:nth-child(3)").text().replace("主演：",""),vod_pic:html(".stui-content__thumb img:first").attr("data-original"),vod_remarks:html(".stui-content__detail p:nth-child(5)").text()||"",vod_content:html("span.detail-content").text().trim()},html=_.map(html("div.lzm3u8 > li > a[target*=_blank]"),it=>it.attribs.title+"$"+it.attribs.href);return id.vod_play_from="量子直达",id.vod_play_url=html.join("#"),JSON.stringify({list:[id]})}async function play(flag,id,flags){return JSON.stringify({parse:0,url:id})}async function search(wd,quick,pg){pg<=0&&(pg=1);var wd=JSON.parse(await request(HOST+"/api.php/provide/vod/?wd="+wd+"&pg="+pg+"&ac=detail")),videos=[];for(const vod of wd.list)videos.push({vod_id:vod.vod_id,vod_name:vod.vod_name,vod_pic:vod.vod_pic,vod_remarks:""});return JSON.stringify({page:parseInt(wd.page),pagecount:wd.pagecount,limit:20,total:wd.total,list:videos})}function __jsEvalReturn(){return{init:init,home:home,homeVod:homeVod,category:category,detail:detail,play:play,search:search}}export{__jsEvalReturn};