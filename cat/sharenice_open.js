import{load,_}from"assets://js/lib/cat.js";let key="短视频",HOST="http://www.sharenice.net",siteKey="",siteType=0,PC_UA="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36";async function request(reqUrl,agentSp){return(await req(reqUrl,{method:"get",headers:{"User-Agent":agentSp||PC_UA}})).content}async function init(cfg){siteKey=cfg.skey,siteType=cfg.stype}function clsjoin(cls){_.each(cls,s=>{let typeId=s.attribs.href;typeId=typeId.substring(typeId.lastIndexOf("t/")+2),classes.push({type_id:typeId,type_name:s.children[0].data})})}let classes=[];async function home(filter){var html=await request(HOST),html=load(html),series=html("div.nav > ul > li > a[href*=net/]"),html=html("div.hot-tags-list > a[href*=net]");return clsjoin(series),clsjoin(html),JSON.stringify({class:classes,filters:{}})}async function homeVod(){var html=await request(HOST+"/t-576O5aWz");let $=load(html);html=$("div.item-box ul li"),html=_.map(html,item=>{var a=$(item).find("a:first")[0],item=$(item).find("img:first")[0];return{vod_id:a.attribs.href,vod_name:a.attribs.title,vod_pic:item.attribs["data-original"],vod_remarks:""}});return JSON.stringify({list:html})}async function category(tid,pg,filter,extend){(pg<=0||void 0===pg)&&(pg=1);tid=await request(HOST+"/"+tid+"?page="+pg);let $=load(tid);var tid=$("div.item-box ul li"),tid=_.map(tid,item=>{var a=$(item).find("a:first")[0],item=$(item).find("img:first")[0];return{vod_id:a.attribs.href,vod_name:a.attribs.title,vod_pic:item.attribs["data-original"],vod_remarks:""}}),pgCount=0<$("ul.pagination > li > a:contains(»)").length?parseInt(pg)+1:parseInt(pg);return JSON.stringify({page:parseInt(pg),pagecount:pgCount,limit:16,total:16*pgCount,list:tid})}async function detail(id){var vod={vod_id:id,vod_remarks:""},id=["观看视频$"+id];return vod.vod_play_from="道长在线",vod.vod_play_url=id.join("#"),JSON.stringify({list:[vod]})}async function play(flag,id,flags){id=await request(id),id=load(id)("div.video-play-box").find("video:first")[0].attribs.src+"#.mp4";return JSON.stringify({parse:0,url:id})}async function search(wd,quick,pg){return"{}"}function __jsEvalReturn(){return{init:init,home:home,homeVod:homeVod,category:category,detail:detail,play:play,search:search}}export{__jsEvalReturn};