import{load,_}from"assets://js/lib/cat.js";let key="世纪DJ音乐网",HOST="http://m.dj0898.com",siteKey="",siteType=0;const MOBILE_UA="Mozilla/5.0 (Linux; Android 11; M2007J3SC Build/RKQ1.200826.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/77.0.3865.120 MQQBrowser/6.2 TBS/045714 Mobile Safari/537.36";async function request(reqUrl,agentSp){return(await req(reqUrl,{method:"get",headers:{"User-Agent":agentSp||MOBILE_UA,Referer:HOST}})).content}async function init(cfg){siteKey=cfg.skey,siteType=cfg.stype}async function home(filter){return JSON.stringify({class:_.map([{type_id:1,type_name:"🎧串烧舞曲"},{type_id:2,type_name:"🎧外文舞曲"},{type_id:3,type_name:"🎧早场暖场"},{type_id:4,type_name:"🎧中文舞曲"},{type_id:5,type_name:"🎧其他舞曲"},{type_id:6,type_name:"🎧国外电音"},{type_id:8,type_name:"🎧慢歌连版"},{type_id:9,type_name:"🎧酒吧潮歌"},{type_id:10,type_name:"🎧中文串烧"},{type_id:11,type_name:"🎧外文串烧"},{type_id:12,type_name:"🎧中外串烧"},{type_id:13,type_name:"🎧车载串烧"},{type_id:14,type_name:"🎧越鼓串烧"},{type_id:40,type_name:"🎧3D/环绕"},{type_id:45,type_name:"🎧口水旋律"},{type_id:46,type_name:"🎧精品收藏"},{type_id:47,type_name:"🎧开场舞曲"},{type_id:48,type_name:"🎧印度舞曲"},{type_id:49,type_name:"🎧编排套曲"},{type_id:20,type_name:"🎧DuTch"},{type_id:21,type_name:"🎧Mash up"},{type_id:22,type_name:"🎧ClubHouse"},{type_id:23,type_name:"🎧ElectroHouse"},{type_id:24,type_name:"🎧越南鼓Dj"},{type_id:30,type_name:"🎧Funky"},{type_id:31,type_name:"🎧Reggae"},{type_id:32,type_name:"🎧Rnb"},{type_id:33,type_name:"🎧Hip Hop"},{type_id:34,type_name:"🎧Dubstep"},{type_id:8017,type_name:"🎧Hardstyle"},{type_id:8018,type_name:"🎧Hands Up"}],cls=>(cls.land=1,cls.ratio=1.78,cls)),filters:{}})}async function homeVod(){var html=await request(HOST+"/dance/lists/id/10/1");const $=load(html);html=$("ul.djddv_djList > li"),html=_.map(html,it=>{var a=$(it).find("a")[1],img=$(it).find("img:first")[0],tt=$(it).find("strong:first")[0],it=$(it).find("font")[5];return{vod_id:a.attribs.href,vod_name:tt.children[0].data,vod_pic:img.attribs.src,vod_remarks:"🎵"+it.children[0].data||""}});return JSON.stringify({list:html})}async function category(tid,pg,filter,extend){(pg<=0||void 0===pg)&&(pg=1);tid=await request(HOST+"/dance/lists/id/"+tid+"/"+pg);const $=load(tid);var tid=$("ul.djddv_djList > li"),tid=_.map(tid,it=>{var a=$(it).find("a")[1],img=$(it).find("img:first")[0],tt=$(it).find("strong:first")[0],it=$(it).find("font")[5];return{vod_id:a.attribs.href,vod_name:tt.children[0].data,vod_pic:img.attribs.src,vod_remarks:"🎵"+it.children[0].data||""}}),pgCount=0<$("ul.page_link > li > a:contains( )").length?parseInt(pg)+1:parseInt(pg);return JSON.stringify({page:parseInt(pg),pagecount:pgCount,limit:60,total:60*pgCount,list:tid})}async function detail(id){var id={vod_id:id,vod_remarks:""},playlist=["点击播放$"+id.vod_id];return id.vod_play_from="道长在线",id.vod_play_url=playlist.join("#"),JSON.stringify({list:[id]})}async function play(flag,id,flags){id=await request(id),id=load(id)("body audio[src*=http]")[0].attribs.src;return JSON.stringify({parse:0,url:id})}async function search(wd,quick,pg){(pg<=0||void 0===pg)&&(pg=1);wd=await request(HOST+"/index.php/dance/so/key?key="+wd+"&cid=0&p="+pg);const $=load(wd);var wd=$("ul.djddv_djList > li"),wd=_.map(wd,it=>{var a=$(it).find("a")[1],img=$(it).find("img:first")[0],tt=$(it).find("strong:first")[0],it=$(it).find("font:first")[0];return{vod_id:a.attribs.href,vod_name:tt.children[0].data,vod_pic:img.attribs.src,vod_remarks:"🎵"+it.children[0].data||""}}),pgCount=0<$("ul.page_link > li > a:contains( )").length?parseInt(pg)+1:parseInt(pg);return JSON.stringify({page:parseInt(pg),pagecount:pgCount,limit:60,total:60*pgCount,list:wd,land:1,ratio:1.78})}function __jsEvalReturn(){return{init:init,home:home,homeVod:homeVod,category:category,detail:detail,play:play,search:search}}export{__jsEvalReturn};